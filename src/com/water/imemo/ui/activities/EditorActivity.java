package com.water.imemo.ui.activities;import java.util.Date;import com.water.imemo.R;import com.water.imemo.bean.MyMemo;import com.water.imemo.db.DBUtils;import com.water.imemo.db.TableMyMemo;import com.water.imemo.utils.Constants;import android.app.Activity;import android.content.Context;import android.content.Intent;import android.database.sqlite.SQLiteDatabase;import android.os.Bundle;import android.util.Log;import android.view.View;import android.view.View.OnClickListener;import android.widget.Button;import android.widget.EditText;public class EditorActivity extends Activity{		private final String TAG = EditorActivity.class.getSimpleName();		private EditText editText;	private Button saveButton;		private int memoID = -1;		@Override	protected void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		setContentView(R.layout.editor);		editText = (EditText) findViewById(R.id.memoEditor);		saveButton = (Button) findViewById(R.id.editorSaveButton);				saveButton.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View view) {				String content = editText.getText().toString();				saveMemo(memoID, content);				Context context = EditorActivity.this;				Intent intent = new Intent(context,MemoPageActivity.class);				context.startActivity(intent);				finish();			}		});				String openType = getIntent().getStringExtra("openType");		memoID = getIntent().getIntExtra("memoID", -1);				if(openType.equals(Constants.NO_MEMO_START_EDITOR)){					}else{			SQLiteDatabase database = DBUtils.getInstance().getDataBase();			TableMyMemo tableMemo = DBUtils.getInstance().getMyMemoDB();			MyMemo memo = tableMemo.getMemo(database, memoID);			if(memo != null){				editText.setText(memo.getContent());			}else{				memoID = -1;			}		}	}		private void saveMemo(int id , String content){		SQLiteDatabase database = DBUtils.getInstance().getDataBase();		TableMyMemo tableMemo = DBUtils.getInstance().getMyMemoDB();		long now = new Date().getTime();		Log.d(TAG, "now time is :"+now);		if(id != -1){			MyMemo memo = tableMemo.getMemo(database, id);			memo.setContent(content);			memo.setModifytime(now);			tableMemo.updateMemo(database, memo);		}else{			MyMemo memo = new MyMemo();			memo.setContent(content);			memo.setModifytime(now);			memo.setPosttime(now);			tableMemo.addMemo(database, memo);		}	}			}