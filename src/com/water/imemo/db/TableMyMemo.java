package com.water.imemo.db;import java.util.ArrayList;import java.util.List;import com.water.imemo.bean.MyMemo;import android.content.ContentValues;import android.database.Cursor;import android.database.sqlite.SQLiteDatabase;import android.provider.BaseColumns;import android.util.Log;public class TableMyMemo implements DBTableInterface{		private static final String TAG = TableMyMemo.class.getSimpleName();	public static final String TABLENAME = "memo";	public static final String C_ID = BaseColumns._ID;	public static final String C_CONTENT = "content";	public static final String C_POSTTIME = "posttime";	public static final String C_MODIFYTIME = "modifytime";		private static final String[] ALL_COLUMNN = {C_ID,C_CONTENT,C_POSTTIME,C_MODIFYTIME};		@Override	public void onInit(SQLiteDatabase database) {		StringBuilder sql = new StringBuilder("create table if not exists ").append(TABLENAME).append(" ( ");		sql.append(C_ID).append(" INTEGER PRIMARY KEY AUTOINCREMENT ,")		.append(C_CONTENT).append(" TEXT,")		.append(C_POSTTIME).append(" INTEGER,")		.append(C_MODIFYTIME).append(" INTEGER);");		database.execSQL(sql.toString());		Log.d(TAG, "db sql:"+sql.toString());	}	@Override	public void onUpgrade(SQLiteDatabase database, int newVersion,int oldVersion) {		//dummy	}		public MyMemo getMemo(SQLiteDatabase database,int id){		Cursor cursor = null;		try{						cursor = database.query(TABLENAME, 					ALL_COLUMNN, 					C_ID +  "=?", new String[]{String.valueOf(id)},					null, null, null, null);						if(cursor.moveToNext()){				return assemble(cursor);			}		}finally{			if(cursor != null){				cursor.close();			}		}		return null;	}		public List<MyMemo> getMemo(SQLiteDatabase database, int from , int length){		List<MyMemo> retVal = new ArrayList<MyMemo>();		Cursor cursor = null;		try{			cursor = database.query(TABLENAME, 					ALL_COLUMNN, 					null, null,					null, null, C_MODIFYTIME +" desc", from+","+length);			while(cursor.moveToNext()){				retVal.add(assemble(cursor));			}		}finally{			if(cursor != null){				cursor.close();			}		}		return retVal;	}		public int addMemo(SQLiteDatabase database , MyMemo memo){				ContentValues values = new ContentValues();				values.put(C_CONTENT, memo.getContent());		values.put(C_MODIFYTIME, memo.getModifytime()/1000l);		values.put(C_POSTTIME, memo.getPosttime()/1000l);				long result = database.insertOrThrow(TABLENAME, null, values);				Log.d(TAG, "addMemo result: "+ result);				return 0;	}		public int updateMemo(SQLiteDatabase database , MyMemo memo){				ContentValues values = new ContentValues();				values.put(C_CONTENT, memo.getContent());		values.put(C_MODIFYTIME, memo.getModifytime()/1000l);		values.put(C_POSTTIME, memo.getPosttime()/1000l);						int result = database.update(TABLENAME, values, C_ID+" = ?", new String[]{String.valueOf(memo.getId())});				Log.d(TAG, "update result: "+ result);				return result;	}	private MyMemo assemble(Cursor cursor) {		MyMemo memo = new MyMemo();		memo.setId(cursor.getInt(0));		memo.setContent(cursor.getString(1));		memo.setPosttime(cursor.getInt(2) * 1000l);		memo.setModifytime(cursor.getInt(3) * 1000l);		return memo;	}			}